<%- include('./partials/header.ejs', {data: {title} }); %>


    <main>
        <section class="data-section my-8">
            <div class="container mx-auto px-3 md:px-0">
                <h2 class="text-center text-3xl font-semibold mb-4">Create Service Ticket</h2>
                <div class="max-w-2xl p-5 rounded-lg shadow-lg my-3 w-full mx-auto">
                    <form id="form">
                        <div class="mb-3">
                            <!-- <label for="">Incident Id:</label> -->
                            <input type="hidden" name="incidentId"
                                class="w-full py-2 px-3 text-sm bg-slate-200 rounded outline-none" value="12345">
                        </div>
                        <div class="mb-3">
                            <label for="">Created By:</label>
                            <select name="createdBy" id=""
                            class="w-full py-2 px-3 text-sm bg-slate-200 rounded outline-none" required>
                            <option value="" selected disabled hidden>Choose here</option>
                            <option value="Shreyas">Shreyas</option>
                            <option value="Amir">Amir</option>
                            <option value="Ahmed">Ahmed</option>
                            <option value="Tobby">Tobby</option>
                            <option value="Anthony">Anthony</option>
                        </select>
                            </div>
                        <div class="mb-3">
                            <label for="">Assigned To:</label>
                            <select name="assignTo" id=""
                            class="w-full py-2 px-3 text-sm bg-slate-200 rounded outline-none" required>
                            <option value="" selected disabled hidden>Choose here</option>
                            <option value="Shreyas">Shreyas</option>
                            <option value="Amir">Amir</option>
                            <option value="Ahmed">Ahmed</option>
                            <option value="Tobby">Tobby</option>
                            <option value="Anthony">Anthony</option>
                        </select>
                           </div>
                        <div class="mb-3">
                            <label for="">Description:</label>
                            <input type="text" name="description"
                                class="w-full py-2 px-3 text-sm bg-slate-200 rounded outline-none" required>
                        </div>
                        <div class="mb-3">
                            <label for="">Date:</label>
                            <input type="date" name="date"
                                class="w-full py-2 px-3 text-sm bg-slate-200 rounded outline-none" required>
                        </div>
                        <div class="mb-6">
                            <label for="">State:</label>
                            <select name="state" id=""
                                class="w-full py-2 px-3 text-sm bg-slate-200 rounded outline-none" required>
                                <option value="In Queue">In Queue</option>
                                <option value="scheduled">Scheduled</option>
                                <option value="canceled">Canceled</option>
                                <option value="completed">Completed</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <button  class="bg-teal-400 text-white py-2 px-5 rounded w-full text-center hover:bg-teal-600 transition-all">Add</button>
                           
                        </div>
                        <div class="mb-3">
                        <a href="/add" type="button" class="btn btn-primary btn-lg active bg-red-600 text-white py-2 px-5 rounded w-full text-center hover:bg-red-600 transition-all" role="button" aria-pressed="true">Reset</a>
           
                        </div>
            
        </section>

        <script>


            const form = document.getElementById("form")
            form.onsubmit = (e) => {
                e.preventDefault()
                const { incidentId, createdBy, assignTo, description, date, state } = e.target
                fetch(`/add/`, {
                    method: "POST",
                    headers: {
                        'Content-type': "application/json"
                    },
                    body: JSON.stringify({ incidentId: incidentId.value, createdBy: createdBy.value, assignedTo: assignTo.value, description: description.value, date: date.value, state: state.value })
                }).then(res => res.json()).then(data => data ? window.location.href = "/" : console.log(data))
            }
        </script>

    </main>


    <%- include('./partials/footer.ejs'); %>